# Lumina Echo 测试指南

## 测试环境

本地服务器已启动：`http://localhost:8000`

## 测试步骤

### 1. 基础功能测试

#### 1.1 页面加载测试
- [ ] 打开 `http://localhost:8000`
- [ ] 检查页面是否正常加载
- [ ] 检查背景效果是否显示
- [ ] 检查标签按钮是否显示（5个标签）

#### 1.2 数据加载测试
- [ ] 打开浏览器控制台（F12）
- [ ] 检查是否有 "卡牌数据加载成功: 22 张" 的日志
- [ ] 检查是否有错误信息

#### 1.3 标签选择测试
- [ ] 点击任意标签按钮
- [ ] 检查标签是否高亮（金色背景）
- [ ] 检查其他标签是否取消选中
- [ ] 检查开始按钮是否显示
- [ ] 检查提示文字是否变为 "点击注入能量 · 开启链接"

### 2. 核心功能测试

#### 2.1 开始旅程测试
- [ ] 选择标签后，点击开始按钮
- [ ] 检查是否进入洗牌页面
- [ ] 检查进度条是否开始填充（3秒）

#### 2.2 洗牌算法测试（桌面端）
- [ ] 在洗牌页面移动鼠标
- [ ] 检查卡牌是否有旋转动画
- [ ] 等待3秒，检查是否自动进入加载页

#### 2.3 洗牌算法测试（移动端）
- [ ] 在移动设备上打开页面
- [ ] 选择标签并开始
- [ ] iOS设备：检查是否弹出权限请求
- [ ] 摇晃手机，检查卡牌动画
- [ ] 等待3秒，检查是否进入加载页

#### 2.4 加载页面测试
- [ ] 检查加载文案是否依次显示：
  - "正在链接潜意识频率..."
  - "捕捉环境磁场熵值..."
  - "星图矩阵校准中..."
  - "解读完成。"
- [ ] 检查每个文案是否停留0.8秒

### 3. 结果页测试

#### 3.1 结果展示测试
- [ ] 检查卡牌图片是否加载
- [ ] 检查卡牌名称是否正确显示
- [ ] 检查关键词是否显示（2个）
- [ ] 检查解读文案是否显示
- [ ] 检查行动建议是否显示
- [ ] 检查日期和月相是否显示

#### 3.2 社交货币挂件测试
- [ ] 检查"宇宙信号"（灵数）是否显示
- [ ] 检查"幸运光晕"（颜色）是否显示
- [ ] 检查颜色光晕效果是否正常

#### 3.3 动画效果测试
- [ ] 检查卡牌是否从下方浮现
- [ ] 检查文案是否淡入显示
- [ ] 检查按钮是否依次显示

#### 3.4 正逆位测试
- [ ] 多次抽牌，检查是否有时显示正位，有时显示逆位
- [ ] 检查逆位时卡牌是否旋转180度
- [ ] 检查逆位时文案是否正确（使用reversed字段）

### 4. 功能测试

#### 4.1 图片生成测试
- [ ] 点击"领取护身符"按钮
- [ ] 检查是否弹出下载对话框
- [ ] 检查下载的图片文件名格式是否正确
- [ ] 检查图片尺寸是否为1080x1920px（或接近）

#### 4.2 重新抽牌测试
- [ ] 点击"重新抽牌"按钮
- [ ] 检查是否返回入口页
- [ ] 检查标签选择是否重置
- [ ] 检查开始按钮是否隐藏
- [ ] 重新选择标签，检查流程是否正常

### 5. 边界情况测试

#### 5.1 权限拒绝测试（iOS）
- [ ] 在iOS设备上拒绝陀螺仪权限
- [ ] 检查是否自动切换到触摸模式
- [ ] 检查提示文字是否变为"请用手指在屏幕画圆"

#### 5.2 数据不足测试
- [ ] 在洗牌页面不移动鼠标/不摇晃手机
- [ ] 检查3秒后是否仍能正常抽牌（应使用时间戳作为后备熵源）

#### 5.3 图片加载失败测试
- [ ] 临时重命名一张卡牌图片
- [ ] 检查是否显示占位符（卡牌ID和英文名）

### 6. 性能测试

#### 6.1 加载性能
- [ ] 检查页面首次加载时间
- [ ] 检查JSON数据加载时间
- [ ] 检查卡牌图片加载时间

#### 6.2 动画性能
- [ ] 检查动画是否流畅（60fps）
- [ ] 检查是否有卡顿现象
- [ ] 检查内存使用是否正常

## 已知问题

1. **html2canvas库**：需要网络连接才能加载，离线环境无法使用图片生成功能
2. **iOS权限**：需要在HTTPS环境下才能请求陀螺仪权限

## 测试结果记录

| 测试项 | 状态 | 备注 |
|--------|------|------|
| 页面加载 | ⬜ | |
| 数据加载 | ⬜ | |
| 标签选择 | ⬜ | |
| 洗牌算法 | ⬜ | |
| 结果展示 | ⬜ | |
| 图片生成 | ⬜ | |
| 重新抽牌 | ⬜ | |

## 浏览器兼容性

- ✅ Chrome 85+
- ✅ Safari 13+ (iOS)
- ✅ 微信内置浏览器
- ⚠️ 需要HTTPS环境（生产环境）

## 测试命令

停止服务器：
```bash
# 查找进程
lsof -ti:8000

# 停止进程
kill $(lsof -ti:8000)
```

